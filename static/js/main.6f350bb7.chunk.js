(this["webpackJsonpwiz-calc"]=this["webpackJsonpwiz-calc"]||[]).push([[0],{22:function(e,a,t){e.exports=t(34)},27:function(e,a,t){},32:function(e,a,t){},34:function(e,a,t){"use strict";t.r(a);var n=t(0),l=t.n(n),r=t(19),c=t.n(r),o=(t(27),t(7)),s=t(8),u=t(10),i=t(9),h=t(5),p=t(6),d=t(21),m=Object(n.createContext)(),b={spells:[],character:{percent:0,flat:0,buffs:[]}},f=function(e,a){switch(a.type){case"ADD_SPELL":return{spells:[].concat(Object(d.a)(e.spells),[a.payload]),character:e.character};case"DEL_SPELL":return{spells:e.spells.filter((function(e){return e.id!==a.payload})),character:e.character};case"UPDATE_SPELL":return{spells:e.spells.map((function(e){return e.id===a.payload.id?a.payload:e})),character:e.character};case"UPDATE_CHARACTER":return{character:a.payload,spells:e.spells};default:throw new Error("Action not valid")}},g=function(e){var a=Object(n.useReducer)(f,function(){var e=localStorage.getItem("spellContextState");if(void 0===e||null===e)return b;var a=JSON.parse(atob(e));return a.character.buffs=[],a}()),t=Object(h.a)(a,2),r=t[0],c=t[1];return Object(n.useEffect)((function(){!function(e){localStorage.setItem("spellContextState",btoa(JSON.stringify(e))),console.log("Saved State")}(r)}),[r]),l.a.createElement(m.Provider,{value:[r,c]},e.children)},E=t(40),v=t(36),O=t(38),j=t(43),C=t(37),y=t(20),S=function(e){Object(u.a)(t,e);var a=Object(i.a)(t);function t(e){var n;return Object(o.a)(this,t),(n=a.call(this,e)).handleChange=n.handleChange.bind(Object(p.a)(n)),n}return Object(s.a)(t,[{key:"handleChange",value:function(e){this.props.handleChange(e.target.value)}},{key:"render",value:function(){return l.a.createElement(v.a,null,l.a.createElement(C.a,null,l.a.createElement(y.a,{className:"text-right"},l.a.createElement(O.a,null,this.props.label)),l.a.createElement(y.a,null,l.a.createElement(j.a,{type:"number",value:this.props.data[this.props.target],onChange:this.handleChange}))))}}]),t}(n.Component),x=function(e){Object(u.a)(t,e);var a=Object(i.a)(t);function t(e){var n;return Object(o.a)(this,t),(n=a.call(this,e)).handleChange=n.handleChange.bind(Object(p.a)(n)),n}return Object(s.a)(t,[{key:"parseBuffs",value:function(e){var a=e.split("\n");return a=a.map((function(e){return e.split(" ")[0]}))}},{key:"handleChange",value:function(e){var a=this.parseBuffs(e.target.value);this.props.handleChange(a)}},{key:"render",value:function(){return l.a.createElement(v.a,null,l.a.createElement(j.a,{placeholder:"Percent Damager Modifiers",as:"textarea",rows:"13",onChange:this.handleChange}))}}]),t}(n.Component),D=function(e){Object(u.a)(t,e);var a=Object(i.a)(t);function t(e){var n;return Object(o.a)(this,t),(n=a.call(this,e)).handleChange=n.handleChange.bind(Object(p.a)(n)),n.deleteSpell=n.deleteSpell.bind(Object(p.a)(n)),n}return Object(s.a)(t,[{key:"deleteSpell",value:function(){(0,Object(h.a)(this.context,2)[1])({type:"DEL_SPELL",payload:this.spell.id})}},{key:"handleChange",value:function(e){var a=this;return function(t){var n=Object(h.a)(a.context,2),l=n[0],r=n[1],c=l.character;c[e]=t,r({type:"UPDATE_CHARACTER",payload:c})}}},{key:"render",value:function(){var e=Object(h.a)(this.context,1)[0];return l.a.createElement(E.a,{className:"mt-4"},l.a.createElement(E.a.Header,{className:"text-center"},"Character Stats"),l.a.createElement(E.a.Body,null,l.a.createElement(S,{label:"Percent Damage",target:"percent",data:e.character,handleChange:this.handleChange("percent")}),l.a.createElement(S,{label:"Flat Damage",target:"flat",data:e.character,handleChange:this.handleChange("flat")}),l.a.createElement(x,{target:"buffs",character:e.character,handleChange:this.handleChange("buffs")})))}}]),t}(n.Component);D.contextType=m;var k=D,N=t(14),L=t(42);var P=function(e){return l.a.createElement("div",{style:{"font-size":"2em"},className:"text-right"},e.damage)},w=(t(32),function(e){return l.a.createElement(j.a,{autoFocus:!0,onFocus:function(e){e.target.select()},onChange:function(a){e.handleChange(a.target.value)},className:"transparent-input",type:"text",value:e.value})}),A=function(e){Object(u.a)(t,e);var a=Object(i.a)(t);function t(e){var n;return Object(o.a)(this,t),(n=a.call(this,e)).calculateDamage=function(e,a,t,n){for(var l=Math.floor((1+Number(a)/100)*Number(e)+Number(t)),r=0;r<n.length;r++)l*=1+n[r]/100,l=Math.floor(l);return l},n.handleDamageChange=n.handleDamageChange.bind(Object(p.a)(n)),n.handleNameChange=n.handleNameChange.bind(Object(p.a)(n)),n.deleteSpell=n.deleteSpell.bind(Object(p.a)(n)),n}return Object(s.a)(t,[{key:"deleteSpell",value:function(){(0,Object(h.a)(this.context,2)[1])({type:"DEL_SPELL",payload:this.props.spell.id})}},{key:"handleNameChange",value:function(e){(0,Object(h.a)(this.context,2)[1])({type:"UPDATE_SPELL",payload:Object(N.a)(Object(N.a)({},this.props.spell),{},{name:e})})}},{key:"handleDamageChange",value:function(e){(0,Object(h.a)(this.context,2)[1])({type:"UPDATE_SPELL",payload:Object(N.a)(Object(N.a)({},this.props.spell),{},{base:e})})}},{key:"render",value:function(){var e=Object(h.a)(this.context,1)[0],a=this.calculateDamage(this.props.spell.base,e.character.percent,e.character.flat,e.character.buffs);return l.a.createElement(E.a,{className:"mt-4"},l.a.createElement(E.a.Header,null,l.a.createElement(C.a,null,l.a.createElement(y.a,{className:""},l.a.createElement(w,{value:this.props.spell.name,handleChange:this.handleNameChange})),l.a.createElement(y.a,{className:"col-sm-3 col-md-2 col-lg-2"},l.a.createElement(L.a,{onClick:this.deleteSpell,className:"btn-danger float-right"},"X")))),l.a.createElement(E.a.Body,null,l.a.createElement(S,{label:"Base Damage",target:"base",data:this.props.spell,handleChange:this.handleDamageChange}),l.a.createElement(P,{damage:a})))}}]),t}(n.Component);A.contextType=m;var T=A,_=t(41),B=function(){var e=Object(n.useContext)(m),a=Object(h.a)(e,2)[1];return l.a.createElement(C.a,{className:"mt-4"},l.a.createElement(y.a,{className:"text-center"},l.a.createElement(L.a,{onClick:function(){a({type:"ADD_SPELL",payload:{id:Object(_.a)(),name:"",base:0}})}},"Add Spell")))},R=t(39),U=function(e){Object(u.a)(t,e);var a=Object(i.a)(t);function t(){return Object(o.a)(this,t),a.apply(this,arguments)}return Object(s.a)(t,[{key:"render",value:function(){var e=Object(h.a)(this.context,1)[0];return l.a.createElement(R.a,null,l.a.createElement(C.a,null,l.a.createElement(y.a,null,l.a.createElement(k,null)),l.a.createElement(y.a,null,e.spells.map((function(e){return l.a.createElement(T,{key:e.id,spell:e})})),l.a.createElement(B,null))))}}]),t}(n.Component);U.contextType=m;var H=U,J=(t(33),function(e){Object(u.a)(t,e);var a=Object(i.a)(t);function t(){return Object(o.a)(this,t),a.apply(this,arguments)}return Object(s.a)(t,[{key:"render",value:function(){return l.a.createElement("div",{className:"App"},l.a.createElement(g,null,l.a.createElement(H,null)))}}]),t}(n.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(J,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[22,1,2]]]);
//# sourceMappingURL=main.6f350bb7.chunk.js.map